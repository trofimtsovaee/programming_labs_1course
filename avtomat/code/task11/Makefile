# Компилятор
CC := gcc

# Флаги компиляции: 
# -Wall и -Wextra включают предупреждения компилятора, 
# -std=c11 указывает компилятору использовать стандарт языка C11, 
# O2 - уровень оптимизации
CFLAGS := -Wall -Wextra -std=c11 -O2

# Флаги компоновщика для линковки (не нужны здесь)
LDFLAGS :=

# Библиотеки для линковки (не нужны здесь)
LDLIBS :=

# Исходные файлы проекта
SRC := main.c dynarray.c

# Объектные файлы (во всех файлах  из SRC заменяем .c на .o)
OBJ := $(SRC:.c=.o)

# Имя исполняемого файла
TARGET := proj_dynarray

# Цель по умолчанию (сборка проекта)
all: $(TARGET)

# Сборка исполняемого файла из объектных
# $(CC) $(LDFLAGS) $(OBJ) -o $@ $(LDLIBS) эквивалентно gcc main.o dynarray.o -o proj_dynarray
# LDFLAGS отсутствуют, LDLIBS тоже здесь отсутствуют
$(TARGET): $(OBJ)
	$(CC) $(LDFLAGS) $(OBJ) -o $@ $(LDLIBS)

# Сборка .o из .c (опционально, GNU Make сам это понимает, но лучше указать явно)
# Для main.c $(CC) $(CFLAGS) -c $< -o $@ эквивалентно gcc -Wall -Wextra -std=c11 -O2 -c main.c -o main.o
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

# Очистка (удалить объектные и исполняемый файлы)
clean:
	$(RM) $(OBJ) $(TARGET)
